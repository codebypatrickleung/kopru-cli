# --------------------------------------------------------------------------------------------
# Kopru Configuration Template
# --------------------------------------------------------------------------------------------
# Copy this file to kopru-config.env and fill in your values
# --------------------------------------------------------------------------------------------

# --------------------------------------------------------------------------------------------
# Platform Configuration
# --------------------------------------------------------------------------------------------

# Source cloud platform (currently supported: azure)
SOURCE_PLATFORM="azure"

# Target cloud platform (currently supported: oci)
TARGET_PLATFORM="oci"

# --------------------------------------------------------------------------------------------
# Azure Configuration (Required when SOURCE_PLATFORM=azure)
# --------------------------------------------------------------------------------------------

# Name of the Azure VM to migrate
AZURE_COMPUTE_NAME="your-vm-name"

# Azure resource group containing the VM
AZURE_RESOURCE_GROUP="your-resource-group"

# Azure storage account for VHD export
AZURE_STORAGE_ACCOUNT="yourstorageaccount"

# --------------------------------------------------------------------------------------------
# OCI Configuration (Required when TARGET_PLATFORM=oci)
# --------------------------------------------------------------------------------------------

# OCI compartment OCID where resources will be created
OCI_COMPARTMENT_ID="ocid1.compartment.oc1..xxxx"

# OCI subnet OCID for the new instance
OCI_SUBNET_ID="ocid1.subnet.oc1..xxxx"

# OCI region (optional, default: eu-frankfurt-1)
OCI_REGION="eu-frankfurt-1"

# --------------------------------------------------------------------------------------------
# OCI Configuration (Optional)
# --------------------------------------------------------------------------------------------

# OCI bucket name for image storage (default: kopru-bucket)
OCI_BUCKET_NAME="kopru-bucket"

# OCI custom image name (default: kopru-image)
OCI_IMAGE_NAME="kopru-image"

# OCI image operating system for import and adjustment (default: auto-detect)
# This should match the source VM's operating system.
# Supported values: Ubuntu, CentOS, Red Hat, Oracle Linux, CUSTOM
# When set to "CUSTOM", the CUSTOM_OS_ADJUSTMENT_SCRIPT will be used for OS adjustments
OCI_IMAGE_OS="Ubuntu"

# Custom OS adjustment script path (required when OCI_IMAGE_OS=CUSTOM)
# This script will be called with the mount directory as an argument
# The script can also access the mount directory via the KOPRU_MOUNT_DIR environment variable
# The script should apply any necessary OS-specific adjustments for OCI compatibility
# Example: CUSTOM_OS_ADJUSTMENT_SCRIPT="./custom-os-adjust.sh"
CUSTOM_OS_ADJUSTMENT_SCRIPT=""

# OCI instance name (default: derived from AZURE_COMPUTE_NAME if available)
# If not specified, the instance name will be automatically set based on the Azure VM name
# being migrated (from AZURE_COMPUTE_NAME environment variable).
# You can override this by setting a specific instance name.
# Note: Template uses AZURE_VM_NAME for bash script compatibility, but Go code reads AZURE_COMPUTE_NAME.
OCI_INSTANCE_NAME=""

# --------------------------------------------------------------------------------------------
# Template Configuration
# --------------------------------------------------------------------------------------------

# Directory for generated template files (default: ./<azure-vm-name>-template-output)
TEMPLATE_OUTPUT_DIR=""

# Skip template deployment (true/false, default: false)
# By default, Kopru will automatically deploy the OCI instance using OpenTofu.
# Set to "true" to skip automatic deployment and deploy manually using the generated template.
SKIP_TEMPLATE_DEPLOY="false"

# --------------------------------------------------------------------------------------------
# Kopru Options
# --------------------------------------------------------------------------------------------

# Keep VHD file after conversion (true/false, default: true)
KEEP_VHD="true"

# Disk mapping file location (default: ./disk-mapping.json)
DISK_MAPPING_FILE="./disk-mapping.json"

# --------------------------------------------------------------------------------------------
# Skip Steps (for resuming incomplete workflows)
# --------------------------------------------------------------------------------------------

# Skip prerequisite checks (true/false, default: false)
SKIP_PREREQ="false"

# Skip OS disk export (true/false, default: false)
SKIP_OS_EXPORT="false"

# Skip VHD conversion (true/false, default: false)
SKIP_OS_CONVERT="false"

# Skip QCOW2 adjustment (true/false, default: false)
SKIP_OS_CONFIGURE="false"

# Skip OCI upload (true/false, default: false)
SKIP_OS_UPLOAD="false"

# Skip image import (true/false, default: false)
SKIP_OS_IMPORT="false"

# Skip data disk export (true/false, default: false)
SKIP_DD_EXPORT="false"

# Skip data disk import (true/false, default: false)
SKIP_DD_IMPORT="false"

# Skip template generation (true/false, default: false)
SKIP_TEMPLATE="false"

# Skip verification (true/false, default: false)
SKIP_VERIFY="false"

# --------------------------------------------------------------------------------------------
# Advanced Options
# --------------------------------------------------------------------------------------------

# Enable debug logging (true/false, default: false)
DEBUG="false"

# Cleanup mount after QCOW2 adjustment (true/false, default: true)
CLEANUP_MOUNT="true"
